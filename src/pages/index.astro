---
import BaseLayout from '../layouts/BaseLayout.astro';
import ImageCard from '../components/ImageCard.astro';
import ImageItem from '../components/ImageItem.astro';
import Text from '../components/Text.astro';
import { getArtworkById, type Artwork } from '../lib/artworks';

// Get specific artworks to feature
const featuredArtworks = [435901, 435614, 437824]
	.map((id) => getArtworkById(id))
	.filter((art): art is Artwork => art !== undefined);
---

<BaseLayout
	title="OnView - Discover Visually Similar Art from the Met Museum"
	description="Discover visually similar paintings from the Metropolitan Museum of Art's Open Access collection using AI-powered visual search. Explore over 2000 artworks and find connections across cultures and time."
	image="https://collectionapi.metmuseum.org/api/collection/v1/iiif/435882/796423/main-image"
	url="https://onview.dev"
>
	<link
		slot="head"
		rel="preload"
		as="image"
		href="https://collectionapi.metmuseum.org/api/collection/v1/iiif/435882/796423/main-image"
		fetchpriority="high"
	/>
	<div data-pagefind-ignore>
		<div class="flex justify-around items-center px-4">
			<div class="flex flex-col justify-center pt-8 md:pt-12 pb-6">
				<h1 class="text-3xl md:text-4xl text-primary text-center py-4">
					OnView
				</h1>
				<p
					class="text-base md:text-xl text-primary text-center max-w-2xl leading-relaxed mx-auto"
				>
					Discover <span class="text-primary underline">visually similar</span> paintings
					at the Metropolitan Museum of Art. Explore artworks you love and uncover
					<span class="text-primary underline">unique connections</span>.
				</p>
			</div>
		</div>
		<div class="flex justify-center">
			<div>
				<a
					href="/explore/"
					class="text-black shrink-0 bg-gray-warm-100 p-2 rounded-full px-6 text-xl hover:bg-gray-warm-100/80 hover:underline hover:cursor-pointer inline-block"
					>Explore &rarr;</a
				>
			</div>
		</div>

		<figure class="mt-7 mx-3 group">
			<a href="/artwork/435882/">
				<ImageCard
					imageUrl="https://collectionapi.metmuseum.org/api/collection/v1/iiif/435882/796423/main-image"
					alt="Still Life with Apples and a Pot of Primroses by Paul Cézanne"
					scale={120}
					x={50}
					y={90}
					fetchpriority="high"
				/>
			</a>
			<figcaption
				class="text-center text-gray-warm-200 text-sm mt-2 group-hover:text-primary"
			>
				Still Life with Apples and a Pot of Primroses, Paul Cézanne
			</figcaption>
		</figure>

		<div class="mt-6 px-4">
			<Text class="mb-3">
				OnView ranks images in the MET's collection by their visual similarity,
				making it easy to find related works. Instead of relying on metadata
				like artistic movement or medium, images are programmatically compared
				based on visual features such as color, composition, and content.
			</Text>
			<Text>
				All artworks used in this project are available under Creative Commons
				Zero, thanks to the museum's <a
					href="https://www.metmuseum.org/about-the-met/policies-and-documents/open-access"
					class="underline hover:text-primary"
					target="_blank"
					rel="noopener noreferrer">Open Access Initiative</a
				>.
			</Text>
		</div>

		<!-- Featured Artworks Row -->
		<div class="mt-12 mb-8 max-w-6xl mx-auto px-4">
			<div
				class="grid grid-cols-1 md:grid-cols-3 gap-6 justify-items-center items-center"
			>
				{
					featuredArtworks.map((artwork) => (
						<div class="w-full max-w-md">
							<ImageItem artwork={artwork} lazy={false} />
						</div>
					))
				}
			</div>
			<Text class="mt-6">
				Despite being painted by different artists across Renaissance Italy, the
				Madonna and Child works by Cima da Conegliano, Fra Bartolomeo, and
				Titian display striking similarities in visual approach, from
				composition and color palette to the portrayal of their subjects.
			</Text>
		</div>
	</div>
</BaseLayout>
