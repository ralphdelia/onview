---
import BaseLayout from '../layouts/BaseLayout.astro';
import MasonryGallery from '../components/MasonryGallery.astro';
import Text from '../components/Text.astro';
import { allArtworks } from '../lib/artworks';

// Get first 4 images for preloading (first visible row on desktop)
const firstFourImages = allArtworks.slice(0, 4);
---

<BaseLayout
	title="Explore Art Collection - OnView"
	description="Browse and explore over 2000 paintings from the Metropolitan Museum of Art. Discover visually similar artworks using AI-powered visual search technology."
	url="https://onview.dev/explore"
>
	<Fragment slot="head">
		<!-- Preload first row of images for faster LCP -->
		{
			firstFourImages.map((artwork) => (
				<link
					rel="preload"
					as="image"
					href={artwork.images.medium}
					imagesrcset={`${artwork.images.small} 400w, ${artwork.images.medium} 800w`}
					imagesizes="(max-width: 1024px) 33vw, 25vw"
				/>
			))
		}
	</Fragment>
	<div class="container mx-auto px-4 mt-6" data-pagefind-ignore>
		<h1 class="text-4xl text-primary text-center mb-4">Explore</h1>
		<Text variant="lg" class="text-center mb-8">
			Discover connections between artworks from the Met Museum's collection.
			Click any artwork to view details and find visually similar works.
		</Text>

		<MasonryGallery artworks={allArtworks} eagerCount={10} />
	</div>
</BaseLayout>
