---
interface Props {
	imageUrl: string;
	alt: string;
	scale?: number; // Scale percentage (must be >= 100)
	x?: number; // X position as percentage (0-100, default 50 = center)
	y?: number; // Y position as percentage (0-100, default 50 = center)
	class?: string;
	fetchpriority?: 'high' | 'low' | 'auto';
}

const {
	imageUrl,
	alt,
	scale = 100,
	x = 50,
	y = 50,
	class: className = '',
	fetchpriority = 'auto',
} = Astro.props;

// Ensure scale is at least 100
const validScale = Math.max(100, scale);

// Convert scale percentage to a decimal multiplier for object-fit
// scale of 100 = 1x, 120 = 1.2x, etc.
const scaleMultiplier = validScale / 100;
---

<div class={`rounded-md overflow-hidden min-h-96 relative ${className}`}>
	<img
		src={imageUrl}
		alt={alt}
		class="absolute inset-0 w-full h-full object-cover"
		style={{
			objectPosition: `${x}% ${y}%`,
			transform: `scale(${scaleMultiplier})`,
		}}
		fetchpriority={fetchpriority}
	/>
	<div class="relative z-10">
		<slot />
	</div>
</div>
